<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Vote - UASG e-Voting</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background-color: rgb(255, 255, 255);
        }

        .card-header {
            background-color: rgb(255, 255, 255);
            color: black;
        }

        .candidate-card {
            cursor: pointer;
            transition: transform 0.2s;
        }

        .candidate-card:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .form-check-input[type=radio] {
            transform: scale(1.2);
        }

        .form-section {
            margin-bottom: 2rem;
        }
    </style>
</head>

<body>
  <div class="container py-5">
    <div class="text-center mb-5">
      <img src="assets/uasg_logo.png" style="width: 100px;" class="rounded-circle mb-3">
      <h4>e-Voting System</h4>
    </div>

    <form action="/done" method="post" id="voteForm">
      <!-- President -->
      <div class="form-section card">
        <div class="card-header">President</div>
        <div class="card-body">
          <label for="p1" class="card h-100 text-center shadow-sm candidate-card d-block">
            <div class="card-body">
              <img src="static/default.png" class="rounded-circle mb-3" style="width: 100px; height: 100px; object-fit: cover;">
              <h6 class="card-title mb-1">Candidate 001</h6>
              <input id="p1" class="form-check-input mt-2 candidate-radio" type="radio" name="p1" required data-name="Candidate 001">
            </div>
          </label>
        </div>
      </div>

      <!-- Vice President -->
      <div class="form-section card">
        <div class="card-header">Vice President</div>
        <div class="card-body">
          <label for="vp1" class="card h-100 text-center shadow-sm candidate-card d-block">
            <div class="card-body">
              <img src="static/default.png" class="rounded-circle mb-3" style="width: 100px; height: 100px; object-fit: cover;">
              <h6 class="card-title mb-1">Candidate 005</h6>
              <input id="vp1" class="form-check-input mt-2 candidate-radio" type="radio" name="vp1" value="vp1" required data-name="Candidate 005">
            </div>
          </label>
        </div>
      </div>

      <!-- Senator -->
      <div class="form-section card">
        <div class="card-header">Senator</div>
        <div class="card-body">
          <label for="s1" class="card h-100 text-center shadow-sm candidate-card d-block">
            <div class="card-body">
              <img src="static/default.png" class="rounded-circle mb-3" style="width: 100px; height: 100px; object-fit: cover;">
              <h6 class="card-title mb-1">Candidate 009</h6>
              <input id="s1" class="form-check-input mt-2 candidate-radio" type="radio" name="s1" required data-name="Candidate 009">
            </div>
          </label>
        </div>
      </div>

      <!-- Representative -->
      <div class="form-section card">
        <div class="card-header">Representative</div>
        <div class="card-body">
          <label for="r1" class="card h-100 text-center shadow-sm candidate-card d-block">
            <div class="card-body">
              <img src="static/default.png" class="rounded-circle mb-3" style="width: 100px; height: 100px; object-fit: cover;">
              <h6 class="card-title mb-1">Candidate 013</h6>
              <input id="r1" class="form-check-input mt-2 candidate-radio" type="radio" name="r1" required data-name="Candidate 013">
            </div>
          </label>
        </div>
      </div>

      <!-- Review Button -->
      <div class="text-center mt-4">
        <button type="button" class="btn btn-primary px-5" onclick="previewSelection()">Review Selection</button>
      </div>

      <!-- Confirmation Section -->
      <div id="confirmationSection" class="mt-5" style="display: none;">
        <div class="card border-success">
          <div class="card-header bg-success text-white">Confirm Your Vote</div>
          <div class="card-body">
            <ul class="list-group mb-3">
              <li class="list-group-item d-flex justify-content-between"><strong>President:</strong> <span id="summaryPresident">-</span></li>
              <li class="list-group-item d-flex justify-content-between"><strong>Vice President:</strong> <span id="summaryVP">-</span></li>
              <li class="list-group-item d-flex justify-content-between"><strong>Senator:</strong> <span id="summarySec">-</span></li>
              <li class="list-group-item d-flex justify-content-between"><strong>Representative:</strong> <span id="summaryRep">-</span></li>
            </ul>
            <div class="text-center d-flex justify-content-center gap-3">
              <button type="submit" name="final_submit" class="btn btn-success px-4">Submit Final Vote</button>
              <button type="button" class="btn btn-outline-secondary px-4" onclick="cancelReview()">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- Scripts -->
  <script>
    function previewSelection() {
      const form = document.getElementById('voteForm');
      const getSelected = (name) => {
        const input = form.querySelector(`input[name="${name}"]:checked`);
        return input ? input.dataset.name : 'None Selected';
      };

      document.getElementById('summaryPresident').textContent = getSelected('p1');
      document.getElementById('summaryVP').textContent = getSelected('vp1');
      document.getElementById('summarySec').textContent = getSelected('s1');
      document.getElementById('summaryRep').textContent = getSelected('r1');

      document.getElementById('confirmationSection').style.display = 'block';
      window.scrollTo({ top: document.getElementById('confirmationSection').offsetTop, behavior: 'smooth' });
    }

    function cancelReview() {
      document.getElementById('confirmationSection').style.display = 'none';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>